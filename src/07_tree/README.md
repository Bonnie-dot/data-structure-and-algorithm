# 树（Tree）

## 1. 定义

树（Tree）是一种 **非线性** 数据结构，由**节点（Node）** 组成，具有 **层次关系**。树的特点包括：

-   每个节点可以有 **多个子节点**。
-   除了根节点（Root），每个节点只有一个**父节点（Parent）**。
-   没有形成回路，即树是**无环图**。

## 2. 术语

### 2.1. 基本概念

-   **根节点（Root）**: 树的起始节点，没有父节点。
-   **子节点（Child）**: 由某个节点直接连接的下一级节点。
-   **父节点（Parent）**: 直接指向子节点的上一级节点。
-   **叶子节点（Leaf）**: 没有子节点的节点。
-   **深度（Depth）**: 从根节点到当前节点的路径长度。
-   **高度（Height）**: 从当前节点到最远叶子节点的路径长度。
-   **度（Degree）**: 一个节点的子节点个数。
-   **层级（Level）**: 树的第 **n** 层，根节点为 **第 0 层**。

### 2.2. 特殊类型的树

-   **二叉树（Binary Tree）**: 每个节点最多有 **两个子节点**（左子节点、右子节点）。
-   **完全二叉树（Complete Binary Tree）**: 除了最后一层，所有层的节点数达到最大，并且**最后一层的节点靠左对齐**。
-   **满二叉树（Full Binary Tree）**: 每个节点要么没有子节点，要么有 **两个子节点**。
-   **平衡二叉树（Balanced Binary Tree）**: 左右子树的高度差不超过 **1** 的二叉树。

#### 二叉搜索树（Binary Search Tree, BST）

1. 定义

**二叉搜索树（BST, Binary Search Tree）** 是一种 **有序二叉树**，满足以下性质：

-   **左子树的值 < 根节点的值**
-   **右子树的值 > 根节点的值**
-   **每个子树本身也是二叉搜索树**

BST 适用于 **高效搜索、插入、删除**，平均时间复杂度 **O(log N)**。

##### 使用场景

-   数据库索引
-   文件系统
-   路由表
-   编译器词法分析

##### 自平衡二叉搜索树

普通的二叉搜索树（BST）在插入或删除操作时可能会变得不平衡，导致树的高度增加，进而影响查找、插入和删除等操作的效率，最坏情况下时间复杂度可能退化为 O(n)。

为了解决这个问题，可以使用自平衡二叉搜索树，它们在插入和删除时会自动调整树的结构，保持树的平衡，从而保证操作的时间复杂度为 O(log n)。以下是几种常见的自平衡二叉搜索树：

1. 红黑树（Red-Black Tree）
   红黑树是一种广泛使用的自平衡二叉搜索树。它通过以下规则保持平衡：

-   每个节点是红色或黑色。
-   根节点是黑色。
-   每个叶子节点（NIL 节点）是黑色。
-   如果一个节点是红色，则它的两个子节点都是黑色（即没有两个连续的红色节点）。
-   从任一节点到其每个叶子的所有路径都包含相同数目的黑色节点。

红黑树通过旋转和重新着色来保持平衡，插入和删除操作的时间复杂度为 O(log n)。

2. AVL 树
   AVL 树是一种高度平衡的二叉搜索树。它通过维护每个节点的平衡因子（左子树高度减去右子树高度）来保持平衡，平衡因子的绝对值不超过 1。

当插入或删除操作导致树不平衡时，AVL 树会通过旋转操作来恢复平衡。

AVL 树的查找、插入和删除操作的时间复杂度均为 O(log n)，但由于其严格的平衡条件，插入和删除操作可能需要更多的旋转操作。

#### Trie（前缀树 / 字典树）

1. 定义

Trie（前缀树 / 字典树）是一种 **树形数据结构**，主要用于 **高效存储和检索字符串**，特别适用于 **前缀匹配** 和 **自动补全**。

1.1. 结构特点

-   **每个节点代表一个字符**，多个字符组合形成单词。
-   **从根节点到某个节点的路径表示一个前缀**。
-   **所有共有前缀的单词共享相同的前缀路径**，提高存储效率。
-   **支持高效的字符串查询**，如前缀搜索、词频统计等。

#### Patricia Tree（前缀树）

1. 定义

Patricia Tree（Practical Algorithm To Retrieve Information Coded In Alphanumeric，Patricia Trie）是一种 **压缩前缀树**，用于 **高效存储和检索** 关键路径的数据结构。常用于 **区块链、路由表、IP 前缀匹配** 等场景。

2. 结构特点

-   **压缩存储**：合并只有一个子节点的路径，减少存储空间。
-   **基于二进制位**：通常在二进制字符串上进行操作，如 IP 地址、哈希值。
-   **高效查找**：通过最长公共前缀加速搜索。

#### Merkle Tree 是一种 哈希树（Hash Tree），用于 数据完整性验证，广泛应用于 区块链、去中心化存储（IPFS）、Git 版本控制 等场景。

1. 结构特点

-   叶子节点：存储数据块的哈希值。
-   非叶子节点：存储其子节点哈希值的组合哈希。
-   Merkle Root：树的根哈希，可用于数据完整性验证。
